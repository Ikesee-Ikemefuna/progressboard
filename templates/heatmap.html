{% extends 'index.html' %}
{% block content %}
<div id="color-gradient">
</div>
<table id="man-heatmap">
  <tr class='header'>
    <th class='color title'><a href='#'>Progress Board</a></th>
    {% for session in plot_dict['data'][0]['x'] %}
    <th class='color session'><a href='#'>{{session}}</a></th>
    {% endfor %}
  </tr>
  {% for name in plot_dict['data'][0]['y'] %}
  <tr>
    <th class='color name'><a href="#">{{name}}</a></th>
    {% for score in plot_dict['data'][0]['z'][loop.index-1] %}
    {% set color_code = (score/10 + 0.8) | int | round(0, 'floor') | int %}
    {% set outer_loop = loop %}
    <td class='color color_{{ color_code }}'>
      <ul>
        {% for repo in users[name] %}
        {% if (repo['session'] | int) == outer_loop.index %}
        <li>
          <button onclick="location.href='{{repo.url}}'" class={{repo.status}} type="button"  title={{repo.name}}>
            {{repo.exercise}}
          </button>
        </li>
        {% endif %}
        {% endfor %}
      </ul>
      <!-- <span class='score'>{{ score }}%</span> -->
    </td>
    {% endfor %}
  </tr>
  {% endfor %}
</table>
{% endblock %}
